# 1-1. 사전 조건

1단계를 실행하기 전에 반드시 준비되어 있어야 하는 항목들이다.

이 조건이 충족되지 않으면 자동 배포는 중간에 실패한다.

### 1️⃣ GitHub에서 워크플로우 실행이 가능해야 한다

- 저장소에 `deploy.yml` 파일이 존재해야 한다.
- GitHub → **Actions 탭**에서 `7th-room-project-deploy`가 보여야 한다.
- “Run workflow” 버튼이 활성화되어 있어야 한다.

이 버튼이 보이지 않으면 자동 배포를 시작할 수 없다.

### 2️⃣ GitHub Secrets가 등록되어 있어야 한다

자동화 과정에서 AWS, Docker, EC2에 접근하기 위한 인증 정보가 필요하다.

다음 항목들이 GitHub Secrets에 등록되어 있어야 한다.

- `AWS_ACCESS_KEY_ID`
- `AWS_SECRET_ACCESS_KEY`
- `DOCKER_USERNAME`
- `DOCKER_TOKEN`
- `SSH_PRIVATE_KEY`

이 값들이 없으면 다음과 같은 문제가 발생한다.

- AWS 접근 실패
- Docker 이미지 업로드 실패
- EC2 SSH 접속 실패

### 3️⃣ AWS 기본 환경이 준비되어 있어야 한다

- AWS에 기본(Default) VPC가 존재해야 한다.
- 퍼블릭 서브넷이 존재해야 한다.
- Terraform 변수에 지정한 `key_pair_name`과 동일한 Key Pair가 AWS에 실제로 존재해야 한다.

Key Pair가 존재하지 않으면 EC2에 SSH 접속할 수 없다.

### 4️⃣ Terraform이 정상 동작해야 한다

- `terraform/` 디렉토리가 존재해야 한다.
- `terraform apply` 실행 시 EC2가 정상 생성되어야 한다.
- 생성 후 EC2 Public IP가 출력되어야 한다.

반드시 다음 출력값이 존재해야 한다.

- `room7_public_ip`
- (RDS 사용 시) `endpoint`

이 값들은 이후 단계에서 Ansible이 접속 대상 서버와 DB 주소를 알기 위해 사용된다.
