# 1-2. 네트워크 선택

이번 단계에서는 **EC2를 어떤 네트워크에 배치할 것인지 결정하는 과정**이다. 

본 프로젝트에서는 새로운 네트워크를 만들지 않고, **AWS 기본(Default) 네트워크를 그대로 사용한다.**

### 1️⃣ Default VPC를 사용한다

AWS는 계정을 생성하면 기본적으로 **Default VPC**를 제공한다.

이 VPC 안에는 이미 인터넷과 연결된 서브넷들이 존재한다.

본 프로젝트에서는 다음과 같은 이유로 Default VPC를 사용한다.

- 별도의 네트워크 설계가 필요 없다.
- 빠르게 테스트 환경을 구성할 수 있다.
- Terraform 코드가 단순해진다.

### 2️⃣ Public Subnet을 선택한다

EC2는 **Public Subnet**에 생성된다.

Public Subnet이란:

- 인터넷과 직접 연결된 서브넷이다.
- 인스턴스에 Public IP가 부여될 수 있다.

Terraform에서는 다음 조건을 만족하는 서브넷을 자동으로 조회한다.

- Default VPC에 속해 있어야 한다.
- 첫 번째 가용 영역(AZ-a)에 있어야 한다.
- `map-public-ip-on-launch = true` 설정이 되어 있어야 한다.

이 조건을 만족하는 서브넷 중 하나를 선택해 EC2를 생성한다.

### 3️⃣ Public IP를 자동으로 부여한다

EC2 생성 시 다음 설정이 적용된다.

```
associate_public_ip_address =true
```

이 설정의 의미는 다음과 같다.

- EC2에 Public IP가 자동으로 부여된다.
- 외부에서 SSH 접속이 가능해진다.
- GitHub Actions가 Ansible로 접속할 수 있게 된다.

이 설정이 없다면:

- 외부에서 EC2에 직접 접속할 수 없다.
- 자동 배포가 동작하지 않는다.

### 4️⃣ 현재 네트워크 구조 요약

- VPC: Default VPC 사용
- Subnet: Public Subnet (AZ-a)
- Public IP: 자동 할당
- 인터넷 연결: 가능
- 외부 접근: Security Group 규칙에 따라 허용

이 단계의 목적은 **“외부에서 접근 가능한 EC2를 만들기 위한 네트워크 기반을 설정하는 것”**이다.
